# Инструкция по обновлению проекта через Git

## ⚠️ ВАЖНО: Сохранение данных пользователей

База данных `data/app.db` теперь **исключена из Git** и **НЕ будет** перезаписываться при обновлениях.

## Процесс безопасного обновления:

### 1. Перед обновлением (рекомендуется):

```bash
# Создайте резервную копию базы данных
cp novacreator-studio/data/app.db novacreator-studio/data/app.db.backup.$(date +%Y%m%d_%H%M%S)
```

### 2. Обновление кода:

```bash
# Обновите код через git
git pull origin main

# Или если используете другую ветку
git pull origin <branch-name>
```

### 3. Что происходит:

- ✅ **Код обновляется** - все PHP, CSS, JS файлы обновляются
- ✅ **База данных сохраняется** - `data/app.db` остается нетронутой
- ✅ **Миграции применяются автоматически** - новые поля добавляются при первом запросе
- ✅ **Данные пользователей сохраняются** - все регистрации, проекты, метрики остаются

### 4. После обновления:

Просто откройте сайт в браузере - миграции применятся автоматически при первом запросе.

## Что было сделано:

1. ✅ База данных `data/app.db` удалена из Git индекса
2. ✅ Добавлена в `.gitignore` для предотвращения будущих коммитов
3. ✅ Добавлены поля для метрик в таблицу `projects`
4. ✅ Миграции настроены на автоматическое добавление новых полей

## Проверка:

После обновления проверьте:

```bash
# Убедитесь, что база данных не отслеживается
git ls-files | grep app.db
# Должно быть пусто

# Проверьте, что файл существует
ls -la novacreator-studio/data/app.db
# Файл должен существовать
```

## Восстановление из резервной копии:

Если что-то пошло не так:

```bash
# Остановите веб-сервер (если нужно)
# Восстановите базу данных
cp novacreator-studio/data/app.db.backup.* novacreator-studio/data/app.db
# Запустите веб-сервер снова
```

## Новые возможности в админ панели:

Теперь вы можете редактировать:
- ✅ Средний прогресс в день (вручную или автоматически)
- ✅ Среднее время в день (вручную или автоматически)
- ✅ Оценку дней до завершения (вручную или автоматически)

Если поля оставить пустыми - значения будут вычисляться автоматически на основе прогресса и времени.

